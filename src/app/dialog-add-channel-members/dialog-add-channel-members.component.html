


<section>
    @if(us.deviceWidth > 850){
        <div class="headline">
            <span>Leute hinzufügen</span>
            <div class="closeSvgBg" >
                <!--close svg-->
                <svg (click)="dialogRef.close()" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <mask id="mask0_54572_9033" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8" y="8" width="24" height="24">
                    <rect x="8" y="8" width="24" height="24" fill="#D9D9D9"/>
                    </mask>
                    <g mask="url(#mask0_54572_9033)">
                    <path d="M20 21.4L15.1 26.3C14.9167 26.4833 14.6834 26.575 14.4 26.575C14.1167 26.575 13.8834 26.4833 13.7 26.3C13.5167 26.1167 13.425 25.8833 13.425 25.6C13.425 25.3167 13.5167 25.0833 13.7 24.9L18.6 20L13.7 15.1C13.5167 14.9167 13.425 14.6833 13.425 14.4C13.425 14.1167 13.5167 13.8833 13.7 13.7C13.8834 13.5167 14.1167 13.425 14.4 13.425C14.6834 13.425 14.9167 13.5167 15.1 13.7L20 18.6L24.9 13.7C25.0834 13.5167 25.3167 13.425 25.6 13.425C25.8834 13.425 26.1167 13.5167 26.3 13.7C26.4834 13.8833 26.575 14.1167 26.575 14.4C26.575 14.6833 26.4834 14.9167 26.3 15.1L21.4 20L26.3 24.9C26.4834 25.0833 26.575 25.3167 26.575 25.6C26.575 25.8833 26.4834 26.1167 26.3 26.3C26.1167 26.4833 25.8834 26.575 25.6 26.575C25.3167 26.575 25.0834 26.4833 24.9 26.3L20 21.4Z" fill="black"/>
                    </g>
                </svg>
            </div>
        </div>
        
        <div class="radioButtonGroup" >
            <div class="radioButtons">
                <input (click)="changeUserInputVisibility('hide')" [(ngModel)]="resultRadioButton" type="radio" value="team" name="addUser">
                <input (click)="changeUserInputVisibility('show')" [(ngModel)]="resultRadioButton" type="radio" value="selection" name="addUser" >
            </div>
            <div  class="labels">
                <div>
                    <span>Alle Mitglieder von &nbsp;</span>
                    <p>OfficeTeam&nbsp;</p>
                    <span>hinzufügen</span>
                </div>
    
                <span>Bestimmte Leute hinzufügen</span>
            </div>
    
        </div>
        
        <div class="userInput" [ngClass]="{'d-none': hideUserInput}">
            <div class="inputWrapper"> 
                
                @if(selectedUserList.length > 1){
                    <div class="selectedList">
                        <div *ngFor="let item of [].constructor(1); let i = index" class="selectedUser">
                            <img src="{{selectedUserList[i].avatarUrl}}">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="7" cy="7" r="6" fill="#92C83E" stroke="white" stroke-width="2"/>
                            </svg>
                            <span>{{selectedUserList[i].name}}</span>
                            <div class="close">
                                <svg class="close" (click)="removeUser(selectedUserList[i])" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_54572_9033" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8" y="8" width="24" height="24">
                                    <rect x="8" y="8" width="24" height="24" fill="#D9D9D9"/>
                                    </mask>
                                    <g mask="url(#mask0_54572_9033)">
                                    <path d="M20 21.4L15.1 26.3C14.9167 26.4833 14.6834 26.575 14.4 26.575C14.1167 26.575 13.8834 26.4833 13.7 26.3C13.5167 26.1167 13.425 25.8833 13.425 25.6C13.425 25.3167 13.5167 25.0833 13.7 24.9L18.6 20L13.7 15.1C13.5167 14.9167 13.425 14.6833 13.425 14.4C13.425 14.1167 13.5167 13.8833 13.7 13.7C13.8834 13.5167 14.1167 13.425 14.4 13.425C14.6834 13.425 14.9167 13.5167 15.1 13.7L20 18.6L24.9 13.7C25.0834 13.5167 25.3167 13.425 25.6 13.425C25.8834 13.425 26.1167 13.5167 26.3 13.7C26.4834 13.8833 26.575 14.1167 26.575 14.4C26.575 14.6833 26.4834 14.9167 26.3 15.1L21.4 20L26.3 24.9C26.4834 25.0833 26.575 25.3167 26.575 25.6C26.575 25.8833 26.4834 26.1167 26.3 26.3C26.1167 26.4833 25.8834 26.575 25.6 26.575C25.3167 26.575 25.0834 26.4833 24.9 26.3L20 21.4Z" fill="black"/>
                                    </g>
                                </svg>
                            </div>
                        </div>
                        <div class="selectedListLength" (click)="openSelectedUserList()">
                            @if(selectedUserList.length > 1){
                                <span>+{{selectedUserList.length - 1}}</span>
                            }
                        </div>
                    </div>
                }
                @else {
                    <div class="selectedList"> 
                        <div *ngFor="let user of selectedUserList" class="selectedUser">
                            <img src="{{user.avatarUrl}}">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="7" cy="7" r="6" fill="#92C83E" stroke="white" stroke-width="2"/>
                            </svg>
                            <span>{{user.name}}</span>
                            <div class="close">
                                <svg class="close" (click)="removeUser(user)" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_54572_9033" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8" y="8" width="24" height="24">
                                    <rect x="8" y="8" width="24" height="24" fill="#D9D9D9"/>
                                    </mask>
                                    <g mask="url(#mask0_54572_9033)">
                                    <path d="M20 21.4L15.1 26.3C14.9167 26.4833 14.6834 26.575 14.4 26.575C14.1167 26.575 13.8834 26.4833 13.7 26.3C13.5167 26.1167 13.425 25.8833 13.425 25.6C13.425 25.3167 13.5167 25.0833 13.7 24.9L18.6 20L13.7 15.1C13.5167 14.9167 13.425 14.6833 13.425 14.4C13.425 14.1167 13.5167 13.8833 13.7 13.7C13.8834 13.5167 14.1167 13.425 14.4 13.425C14.6834 13.425 14.9167 13.5167 15.1 13.7L20 18.6L24.9 13.7C25.0834 13.5167 25.3167 13.425 25.6 13.425C25.8834 13.425 26.1167 13.5167 26.3 13.7C26.4834 13.8833 26.575 14.1167 26.575 14.4C26.575 14.6833 26.4834 14.9167 26.3 15.1L21.4 20L26.3 24.9C26.4834 25.0833 26.575 25.3167 26.575 25.6C26.575 25.8833 26.4834 26.1167 26.3 26.3C26.1167 26.4833 25.8834 26.575 25.6 26.575C25.3167 26.575 25.0834 26.4833 24.9 26.3L20 21.4Z" fill="black"/>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                }
    
    
                <!--This is the real input field-->
                @if(selectedUserList.length > 1){
                    <input (focus)="detectInputFocus(); changeUserContainerVisibility()" (input)="showFilteredUser()" placeholder="+" [(ngModel)]="searchUser" >
                }
                @else {
                    <input (focus)="detectInputFocus(); changeUserContainerVisibility()" (input)="showFilteredUser()" placeholder="Name eingeben" [(ngModel)]="searchUser" >
    
                }
            
            </div>
        </div>
    
        <label class="errorMessage" #errorMsg ></label>
        
        @if(searchUser == '' && inputFocused){
            <div class="userlistContainer" [ngClass]="{'d-none': hideUserContainer}">
                <div *ngFor="let user of userlist" class="userList">
                    <div class="userContainer" (click)="selectUser(user);">
                        <img src="{{user.avatarUrl}}">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="7" cy="7" r="6" fill="#92C83E" stroke="white" stroke-width="2"/>
                        </svg>
                        <span>{{user.name}}</span>
                    </div>
                </div>
            </div>
        }
        @else if(searchUser == '' && !inputFocused){
            <!--Needed to show nothing when input is empty and not focused-->
        }
        @else {
            <div class="userlistContainer" [ngClass]="{'d-none': hideUserContainer}">
                <div *ngFor="let user of foundUserList" class="userList" >
                    <div  class="userContainer" (click)="selectUser(user);">
                        <img src="{{user.avatarUrl}}">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="7" cy="7" r="6" fill="#92C83E" stroke="white" stroke-width="2"/>
                        </svg>
                        <span>{{user.name}}</span>
                    </div>
                </div>
            </div>
        }
    
        <div class="btnContainer">
            <button (click)="createNewChannel()">Erstellen</button>
        </div>
    }
    @else {
        <!--Mobile View-->
    
        <svg (click)="dialogRef.close()" width="390" height="6" viewBox="0 0 390 6" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="164" width="62" height="6" rx="3" fill="#D9D9D9"/>
        </svg>
        
        
        <div class="headline">
    
            
            <span>Leute hinzufügen</span>
            <div class="closeSvgBg" >
                <!--close svg-->
                <svg (click)="dialogRef.close()" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <mask id="mask0_54572_9033" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8" y="8" width="24" height="24">
                    <rect x="8" y="8" width="24" height="24" fill="#D9D9D9"/>
                    </mask>
                    <g mask="url(#mask0_54572_9033)">
                    <path d="M20 21.4L15.1 26.3C14.9167 26.4833 14.6834 26.575 14.4 26.575C14.1167 26.575 13.8834 26.4833 13.7 26.3C13.5167 26.1167 13.425 25.8833 13.425 25.6C13.425 25.3167 13.5167 25.0833 13.7 24.9L18.6 20L13.7 15.1C13.5167 14.9167 13.425 14.6833 13.425 14.4C13.425 14.1167 13.5167 13.8833 13.7 13.7C13.8834 13.5167 14.1167 13.425 14.4 13.425C14.6834 13.425 14.9167 13.5167 15.1 13.7L20 18.6L24.9 13.7C25.0834 13.5167 25.3167 13.425 25.6 13.425C25.8834 13.425 26.1167 13.5167 26.3 13.7C26.4834 13.8833 26.575 14.1167 26.575 14.4C26.575 14.6833 26.4834 14.9167 26.3 15.1L21.4 20L26.3 24.9C26.4834 25.0833 26.575 25.3167 26.575 25.6C26.575 25.8833 26.4834 26.1167 26.3 26.3C26.1167 26.4833 25.8834 26.575 25.6 26.575C25.3167 26.575 25.0834 26.4833 24.9 26.3L20 21.4Z" fill="black"/>
                    </g>
                </svg>
            </div>
        </div>
        
        <div class="radioButtonGroup" >
            <div class="radioButtons">
                <input (click)="changeUserInputVisibility('hide')" [(ngModel)]="resultRadioButton" type="radio" value="team" name="addUser">
                <input (click)="changeUserInputVisibility('show')" [(ngModel)]="resultRadioButton" type="radio" value="selection" name="addUser" >
            </div>
            <div  class="labels">
                <div>
                    <span>Alle Mitglieder von &nbsp;</span>
                    <p>OfficeTeam&nbsp;</p>
                    <span>hinzufügen</span>
                </div>
    
                <span>Bestimmte Leute hinzufügen</span>
            </div>
    
        </div>
        
        <div class="userInput" [ngClass]="{'d-none': hideUserInput}">
            <div class="inputWrapper"> 
                
                @if(selectedUserList.length > 1){
                    <div class="selectedList"> 
                        <div *ngFor="let item of [].constructor(1); let i = index" class="selectedUser">
                            <img src="{{selectedUserList[i].avatarUrl}}">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="7" cy="7" r="6" fill="#92C83E" stroke="white" stroke-width="2"/>
                            </svg>
                            <span>{{selectedUserList[i].name}}</span>
                            <div class="close">
                                <svg class="close" (click)="removeUser(selectedUserList[i])" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_54572_9033" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8" y="8" width="24" height="24">
                                    <rect x="8" y="8" width="24" height="24" fill="#D9D9D9"/>
                                    </mask>
                                    <g mask="url(#mask0_54572_9033)">
                                    <path d="M20 21.4L15.1 26.3C14.9167 26.4833 14.6834 26.575 14.4 26.575C14.1167 26.575 13.8834 26.4833 13.7 26.3C13.5167 26.1167 13.425 25.8833 13.425 25.6C13.425 25.3167 13.5167 25.0833 13.7 24.9L18.6 20L13.7 15.1C13.5167 14.9167 13.425 14.6833 13.425 14.4C13.425 14.1167 13.5167 13.8833 13.7 13.7C13.8834 13.5167 14.1167 13.425 14.4 13.425C14.6834 13.425 14.9167 13.5167 15.1 13.7L20 18.6L24.9 13.7C25.0834 13.5167 25.3167 13.425 25.6 13.425C25.8834 13.425 26.1167 13.5167 26.3 13.7C26.4834 13.8833 26.575 14.1167 26.575 14.4C26.575 14.6833 26.4834 14.9167 26.3 15.1L21.4 20L26.3 24.9C26.4834 25.0833 26.575 25.3167 26.575 25.6C26.575 25.8833 26.4834 26.1167 26.3 26.3C26.1167 26.4833 25.8834 26.575 25.6 26.575C25.3167 26.575 25.0834 26.4833 24.9 26.3L20 21.4Z" fill="black"/>
                                    </g>
                                </svg>
                            </div>
                        </div>
                        <div class="selectedListLength" (click)="openSelectedUserList()">
                            @if(selectedUserList.length >= 1){
                                <span>+{{selectedUserList.length - 1}}</span>
                            }
                        </div>
                    </div>
                }
                @else {
                    <div class="selectedList"> 
                        <div *ngFor="let user of selectedUserList" class="selectedUser">
                            <img src="{{user.avatarUrl}}">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="7" cy="7" r="6" fill="#92C83E" stroke="white" stroke-width="2"/>
                            </svg>
                            <span>{{user.name}}</span>
                            <div class="close">
                                <svg class="close" (click)="removeUser(user)" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_54572_9033" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8" y="8" width="24" height="24">
                                    <rect x="8" y="8" width="24" height="24" fill="#D9D9D9"/>
                                    </mask>
                                    <g mask="url(#mask0_54572_9033)">
                                    <path d="M20 21.4L15.1 26.3C14.9167 26.4833 14.6834 26.575 14.4 26.575C14.1167 26.575 13.8834 26.4833 13.7 26.3C13.5167 26.1167 13.425 25.8833 13.425 25.6C13.425 25.3167 13.5167 25.0833 13.7 24.9L18.6 20L13.7 15.1C13.5167 14.9167 13.425 14.6833 13.425 14.4C13.425 14.1167 13.5167 13.8833 13.7 13.7C13.8834 13.5167 14.1167 13.425 14.4 13.425C14.6834 13.425 14.9167 13.5167 15.1 13.7L20 18.6L24.9 13.7C25.0834 13.5167 25.3167 13.425 25.6 13.425C25.8834 13.425 26.1167 13.5167 26.3 13.7C26.4834 13.8833 26.575 14.1167 26.575 14.4C26.575 14.6833 26.4834 14.9167 26.3 15.1L21.4 20L26.3 24.9C26.4834 25.0833 26.575 25.3167 26.575 25.6C26.575 25.8833 26.4834 26.1167 26.3 26.3C26.1167 26.4833 25.8834 26.575 25.6 26.575C25.3167 26.575 25.0834 26.4833 24.9 26.3L20 21.4Z" fill="black"/>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                }
    
    
                <!--This is the real input field-->
                @if(selectedUserList.length >= 1){
                    <input (focus)="detectInputFocus(); changeUserContainerVisibility()" (input)="showFilteredUser()" placeholder="+" [(ngModel)]="searchUser" >
                }
                @else {
                    <input (focus)="detectInputFocus(); changeUserContainerVisibility()" (input)="showFilteredUser()" placeholder="Name eingeben" [(ngModel)]="searchUser" >
    
                }
            
            </div>
        </div>
    
        <label class="errorMessage" #errorMsg ></label>
        
        @if(searchUser == '' && inputFocused){
            <div class="userlistContainer" [ngClass]="{'d-none': hideUserContainer}">
                <div *ngFor="let user of userlist" class="userList">
                    <div class="userContainer" (click)="selectUser(user);">
                        <img src="{{user.avatarUrl}}">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="7" cy="7" r="6" fill="#92C83E" stroke="white" stroke-width="2"/>
                        </svg>
                        <span>{{user.name}}</span>
                    </div>
                </div>
            </div>
        }
        @else if(searchUser == '' && !inputFocused){
            <!--Needed to show nothing when input is empty and not focused-->
        }
        @else {
            <div class="userlistContainer" [ngClass]="{'d-none': hideUserContainer}">
                <div *ngFor="let user of foundUserList" class="userList" >
                    <div  class="userContainer" (click)="selectUser(user);">
                        <img src="{{user.avatarUrl}}">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="7" cy="7" r="6" fill="#92C83E" stroke="white" stroke-width="2"/>
                        </svg>
                        <span>{{user.name}}</span>
                    </div>
                </div>
            </div>
        }
    
        <div class="btnContainer">
            <button (click)="createNewChannel()">Erstellen</button>
        </div>
    }
    


</section>